function reloadIconList(){$.getJSON(window.API_BASE+'containers',function(data){$('.services').html(Handlebars.templates['iconlist.hbs'](response.data));containerStats();setTimeout(reloadIconList,15000)})}function reloadBookmarks(){$.getJSON(window.API_BASE+'bookmarks',function(data){$('.bookmarks').html(Handlebars.templates['bookmarks.hbs'](response.data));setTimeout(reloadBookmarks,60000)})}function containerStats(){$('.containerstats').each((i,ctl)=>{$.getJSON(window.API_BASE+'containers/'+$(ctl).attr('container-id')+'/stats',function(data){var cpuPercent=new Intl.NumberFormat('default', {style:'percent',minimumFractionDigits:2,maximumFractionDigits:2}).format(data.cpuPercent);$(ctl).html('CPU '+cpuPercent+', MEM '+data.memoryUsage)})});setTimeout(containerStats,10000)}function renderFeeds(target,data,template){var itemCount=data.map(a=>a.items.length+1).reduce((a,b)=>a+b),tickerDelay=itemCount*5;template=='ticker.hbs'&&($('.ticker').css('-webkit-animation-duration',`${tickerDelay}s`),$('.ticker').css('animation-duration',`${tickerDelay}s`));target.html(Handlebars.templates[template]({feeds:data,feedCount:itemCount,tickerDelay:tickerDelay}))}function loadFeeds(){var url=window.API_BASE+'rss/feeds/ticker';$.getJSON(url,function(data){renderFeeds('footer',data.feeds,'ticker.hbs')});url=window.API_BASE+'rss/feeds/feeds';$.getJSON(url,function(data){renderFeeds('#tabfeeds',data.feeds,'feeds.hbs')});setTimeout(loadFeeds,60000)}
